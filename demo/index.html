<!doctype html>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>sb-html2canvas-element Demo</title>
    <script src="../../webcomponentsjs/webcomponents-lite.min.js"></script>
    <link rel="import" href="../../paper-button/paper-button.html">
    <link rel="import" href="../sb-html2canvas-element.html">
  </head>
  <body unresolved>

    <p>An example of <code>&lt;sb-html2canvas-element&gt;</code>:</p>

    <div id="demo-container">
      <h1>Space Beavers</h1>
      <img src="bieberbeaver.jpg" width="385" height="240" />
    </div>

    <sb-html2canvas-element id="imageGenerator" container="demo-container"></sb-html2canvas-element>

    <paper-button id="demo-save-image" raised>Save Image</paper-button>
    <p>Download Link: <span id="download-link-container"></span></p>

    <script>
      var seedElement = document.querySelector('sb-html2canvas-element');

      document.querySelector('#demo-save-image').addEventListener('click', function() {
        // clear out download link container first
        var downloadLinkContainer = document.getElementById("download-link-container");
        while (downloadLinkContainer.firstChild) {
            downloadLinkContainer.removeChild(downloadLinkContainer.firstChild);
        }

        downloadLinkContainer.innerHTML = 'Generating...';

        // generate image
        seedElement.generateImage();
      });

      document.addEventListener("sb-html2canvas-element-created", function(e) {
        var downloadLink = document.createElement("a");
        downloadLink.setAttribute('href', e.detail.imageUrl);
        downloadLink.innerHTML = e.detail.imageUrl;

        var downloadLinkContainer = document.getElementById('download-link-container');
        downloadLinkContainer.innerHTML = '';
        downloadLinkContainer.appendChild(downloadLink);
      });

    </script>

  </body>
</html>
